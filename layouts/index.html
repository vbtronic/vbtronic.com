{{ define "main" }}
<div class="page-nav-bar">
  <button class="nav-arrow" id="nav-back" onclick="siteNavBack()" title="Back"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg></button>
  <div class="page-nav-title">
    <h1>Home</h1>
  </div>
  <button class="nav-arrow" id="nav-fwd" onclick="siteNavForward()" title="Forward"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button>
</div>

<section class="hero">
  <div class="hero-content">
    <div class="hero-badge">
      <svg class="hero-badge-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></svg>
      <span>Engineering & Innovation</span>
    </div>
    <h1 class="hero-title">VB Tronic</h1>
    <p class="hero-subtitle">{{ .Site.Params.description }}</p>
    <div class="hero-line"></div>
    <div class="hero-actions">
      <a href="/about/" class="hero-btn hero-btn--primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        About Viktor
      </a>
      <a href="/eshop/" class="hero-btn hero-btn--secondary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        E-shop
      </a>
    </div>
  </div>
</section>

<div class="search-box">
  <div class="search-box-inner">
    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    <input type="text" id="search-input" placeholder="Search articles..." autocomplete="off">
  </div>
</div>

<section class="posts-list" id="search-results" style="display:none;">
  {{ range where .Site.RegularPages.ByDate.Reverse ".Section" "about" }}
  <article class="post-card" data-title="{{ .Title | lower }}" data-description="{{ with .Description }}{{ . | lower }}{{ end }}">
    <a href="{{ .Permalink }}">
      <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "Jan 2, 2006 15:04" }} CET</time>
      <h2 class="post-title">{{ .Title }}</h2>
      {{ with .Description }}<p class="post-excerpt">{{ . }}</p>{{ end }}
    </a>
  </article>
  {{ end }}
</section>

<p class="no-results" id="no-results" style="display:none;">No results found.</p>

{{ $recent := first 3 (where .Site.RegularPages.ByDate.Reverse ".Section" "about") }}
{{ if $recent }}
<section class="latest-posts">
  <h2 class="latest-posts-heading">Recently Added</h2>
  <div class="latest-posts-grid">
    {{ range $recent }}
    <article class="latest-post-card">
      <a href="{{ .Permalink }}">
        <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "Jan 2, 2006 15:04" }} CET</time>
        <h3>{{ .Title }}</h3>
        {{ with .Description }}<p>{{ . }}</p>{{ end }}
      </a>
    </article>
    {{ end }}
  </div>
</section>
{{ end }}

<section class="about-card" id="about-web">
  <h2 class="about-heading">
    <svg class="section-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
    About This Web
  </h2>
  <div class="about-body">
    <p>Welcome to <strong>VB Tronic</strong> — a commercial platform and central hub created by Viktor Brunclík. Browse expert articles, seminars, webinars, and digital products, or explore Viktor's portfolio and articles.</p>
  </div>
  <div class="about-links">
    <a href="/about/" class="about-link">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      About Viktor Brunclík
    </a>
    <a href="/eshop/" class="about-link">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
      E-shop
    </a>
    <a href="/help/" class="about-link">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      Site Help
    </a>
    <a href="/feedback/" class="about-link">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      Feedback
    </a>
  </div>
</section>

<script>
(function() {
  var input = document.getElementById('search-input');
  var results = document.getElementById('search-results');
  var noResults = document.getElementById('no-results');
  if (!input || !results) return;

  input.addEventListener('input', function() {
    var query = this.value.toLowerCase().trim();
    var cards = results.querySelectorAll('.post-card');

    if (!query) {
      results.style.display = 'none';
      noResults.style.display = 'none';
      cards.forEach(function(card) { card.style.display = ''; });
      return;
    }

    results.style.display = '';
    var visible = 0;

    cards.forEach(function(card) {
      var title = card.getAttribute('data-title') || '';
      var desc = card.getAttribute('data-description') || '';
      if (title.indexOf(query) !== -1 || desc.indexOf(query) !== -1) {
        card.style.display = '';
        visible++;
      } else {
        card.style.display = 'none';
      }
    });

    noResults.style.display = visible === 0 ? '' : 'none';
  });
})();
</script>
{{ end }}
